---
title: Overview of the Network
date: 2025-4-16 11:37:51
permalink: /pages/net/
---
## Module Introduction

The Network module provides comprehensive network management capabilities for Android STB systems. It encapsulates functionalities for Ethernet, Bluetooth, and WiFi operations, enabling developers to easily manage network connections and settings.

### Key Features

- **Ethernet Management**: Enable/disable Ethernet interface and retrieve IP addresses
- **Bluetooth Control**: Enable/disable Bluetooth and launch pairing activities
- **WiFi Management**: Complete WiFi operations including connection, disconnection, and hotspot management
- **System Integration**: Built with system-level permissions for reliable network control

> Import the package `import com.giec.stb.core.net.*`

## EthernetUtil

The `EthernetUtil` object provides methods to manage the Ethernet interface (eth0) on the device.

### API Reference

| Method | Description | Return Type |
|--------|-------------|-------------|
| `enableEthernet()` | Enables the Ethernet interface (eth0 up) | `Unit` |
| `disableEthernet()` | Disables the Ethernet interface (eth0 down) | `Unit` |
| `setEthernetState(enable: Boolean)` | Sets the Ethernet interface state | `Unit` |
| `getEthernetIp()` | Retrieves the current Ethernet IP address | `String` |

### Usage Examples

```kotlin
import com.giec.stb.core.net.EthernetUtil

// Enable Ethernet interface
EthernetUtil.enableEthernet()

// Disable Ethernet interface
EthernetUtil.disableEthernet()

// Set Ethernet state programmatically
EthernetUtil.setEthernetState(true)  // Enable
EthernetUtil.setEthernetState(false) // Disable

// Get current Ethernet IP address
val ethernetIp = EthernetUtil.getEthernetIp()
println("Ethernet IP: $ethernetIp")
```

### Implementation Details

- Uses shell commands (`ifconfig eth0 up/down`) for interface control
- IP retrieval uses shell command with `grep` and `awk` for parsing
- All operations are logged with the "EthernetUtil" tag

---

## BluetoothUtil

The `BluetoothUtil` object provides methods to manage Bluetooth functionality and pairing operations.

### API Reference

| Method | Description | Parameters | Return Type |
|--------|-------------|------------|-------------|
| `openBluetooth()` | Enables Bluetooth | None | `Unit` |
| `closeBluetooth()` | Disables Bluetooth | None | `Unit` |
| `setBTState(enable: Boolean)` | Sets Bluetooth state | `enable: Boolean` | `Unit` |
| `launchBtPair(context: Context)` | Launches Bluetooth pairing activity | `context: Context` | `Unit` |

### Usage Examples

```kotlin
import com.giec.stb.core.net.BluetoothUtil

// Enable Bluetooth
BluetoothUtil.openBluetooth()

// Disable Bluetooth
BluetoothUtil.closeBluetooth()

// Set Bluetooth state programmatically
BluetoothUtil.setBTState(true)  // Enable
BluetoothUtil.setBTState(false) // Disable

// Launch Bluetooth pairing setup activity
BluetoothUtil.launchBtPair(context)
```

### Implementation Details

- Uses `BluetoothAdapter.getDefaultAdapter()` for Bluetooth control
- Includes null safety checks for devices without Bluetooth hardware
- Pairing activity is launched through `AppUtil.launchBtSetupActivity()`
- All operations are logged with the "BluetoothUtil" tag

### Error Handling

The `BluetoothUtil` includes proper error handling:

```kotlin
// Example of internal error handling
if (bluetoothAdapter == null) {
    Logger.e(TAG, "Bluetooth adapter is null")
    return
}
```

## WiFi Management

For comprehensive WiFi management including connections, hotspot operations, and advanced network configurations, please refer to the dedicated [WiFi documentation](/pages/net/wifi).

## Best Practices

1. **Check Hardware Availability**: Always verify that the hardware feature is available before using it
2. **Handle Permissions**: Ensure your app has the necessary system permissions
3. **Error Handling**: Implement proper error handling for network operations
4. **Logging**: Use the built-in logging to track network operations and debug issues
5. **System App Requirements**: These utilities require system-level permissions (`android:sharedUserId="android.uid.system"`)

## Required Permissions

Make sure your AndroidManifest.xml includes the necessary permissions:

```xml
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
```

And for system app functionality:

```xml
<application
    android:sharedUserId="android.uid.system"
    ... >
```
